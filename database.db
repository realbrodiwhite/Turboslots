-- SQL Database Schema
CREATE TABLE accounts (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT NOT NULL,
  balance REAL NOT NULL,
  key TEXT NOT NULL UNIQUE,
  last_login INTEGER
);

CREATE TABLE gamestates (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  game_id TEXT NOT NULL,
  reels TEXT NOT NULL,
  bet REAL NOT NULL,
  coin_value REAL NOT NULL,
  FOREIGN KEY(user_id) REFERENCES accounts(id)
);

-- Indexes for faster query performance
CREATE INDEX idx_accounts_key ON accounts (key);
CREATE INDEX idx_gamestates_user_game ON gamestates (user_id, game_id, last_update);  